<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Loan Application Form</title>
    
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500,700&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/fontawesome-all.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/swiper.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/magnific-popup.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/bootstrap.css') }}" rel="stylesheet">

    <link rel="icon" href="{{ url_for('static', filename='images/logo.svg') }}">
    
    <style>
        /* General alignment fixes */
        body {
            font-family: 'Open Sans', sans-serif;
        }
        .form-group {
            margin-bottom: 10px;
        }
        .text-container {
            padding: 15px;
        }
        
        @media (max-width: 991px) {
        .col-lg-6 {
            padding-bottom: 0;
        }
        
        .text-container {
            padding-bottom: 0;
            margin-bottom: 0;
        }
        
        /* Remove extra spacing between property area and applicant income on mobile */
        #property_area {
            margin-bottom: 0;
        }
        
        .form-group {
            margin-bottom: 10px;
        }
        
        /* Make the containers touch each other */
        .col-lg-6 + .col-lg-6 {
            margin-top: 0;
            padding-top: 0;
        }
        
        /* Add some additional fixes for mobile layout */
        .row {
            margin-left: 0;
            margin-right: 0;
        }
        
        .container {
            padding-left: 10px;
            padding-right: 10px;
        }
    }
        /* Form element styling */
        .form-control-input, 
        select.form-control-input {
            display: block;
            width: 100%;
            padding: 10px;
            height: 40px;
            border: 1px solid #ccc;
            border-radius: 50px;
            height: auto;
            font-size: 14px;
            color: #333;
            background-color: #fff;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23333" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
        }

        select.form-control-input:focus {
            outline: none;
            border-color: #14bf98;
            box-shadow: 0 0 5px rgba(20, 191, 152, 0.5);
        }

        select.form-control-input option {
            font-size: 14px;
            color: #333;
            background-color: #fff;
        }
        
        /* Label styling */
        .label-control {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        /* Button styling */
        .form-control-submit-button {
            display: block;
            width: 50%;
            padding: 12px;
            margin: 20px auto;
            border-radius: 50px;
            cursor: pointer;
        }
        
        /* Navigation fixes */
        .navbar-custom {
            padding-top: 15px;
            padding-bottom: 15px;
        }
        
        /* Header spacing */
        .ex-header {
            padding-top: 8rem;
            padding-bottom: 4rem;
            background-color: #14bf98;
        }
        
        /* Insights section alignment */
        #Insights {
            padding: 60px 0;
        }
        
        /* Tab content alignment */
        .tabs-container {
            padding: 20px;
        }
        
        .tab-content {
            padding: 20px;
        }
        
        /* Results styling */
        .result {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        /* Error message styling */
        .text-danger {
            color: #dc3545;
        }
        
        .is-invalid {
            border-color: #dc3545;
            background-color: #fff8f8;
        }
        
        /* Modal Style */
        .modal {
          display: none;
          position: fixed;
          z-index: 1;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          overflow: auto;
          background-color: rgba(0, 0, 0, 0.6);
        }

        .modal-content {
          background-color: #e9ecef; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          margin: 10% auto;
          padding: 20px;
          width: 80%;
          max-width: 600px;
        }

        .close {
          color: #6c757d;
          float: right;
          font-size: 28px;
          font-weight: bold;
          cursor: pointer;
        }

        .close:hover,
        .close:focus {
          color: black;
          text-decoration: none;
          cursor: pointer;
        }
    </style>
</head>
<body data-spy="scroll" data-target=".fixed-top">
    
    <div class="spinner-wrapper">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>
    <nav class="navbar navbar-expand-md navbar-dark navbar-custom fixed-top">
        <a class="navbar-brand logo-image" href="/">
            <h3 style="color:#fff; font-size: 1.25rem;">Loan Approval System</h3>
        </a>
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-awesome fas fa-bars"></span>
            <span class="navbar-toggler-awesome fas fa-times"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link page-scroll" href="#header">HOME <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link page-scroll" href="#Predict">PREDICT</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link page-scroll" href="{{ url_for('logout') }}">LOGOUT</a>
                </li>
            </ul>
        </div>
    </nav>
    <header id="header" class="ex-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h1>Loan Application</h1>
                </div> </div> </div> </header> <div class="ex-basic-1">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumbs">
                        <a href="/">Home</a><i class="fa fa-angle-double-right"></i><span>Predict Loan Application Approval</span>
                    </div> </div> </div> </div> </div> <div id="Predict" class="ex-basic-2">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h4 style="margin-bottom: 30px;">Please Fill in the details to get your chances of Loan Approval.</h4>
                </div>
            </div>
            
            {% if error %}
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
            {% endif %}
            
            <form id="contactForm" data-toggle="validator" data-focus="false" action="{{ url_for('Loan_Application') }}" method="POST">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="text-container cont1">
                            <div class="form-group">
                                <label class="label-control" for="genders_type">Gender</label>
                                <select name="genders_type" id="genders_type" class="form-control-input" required>
                                    <option value="" disabled selected>Select gender</option>
                                    <option value="MALE">Male</option>
                                    <option value="FEMALE">Female</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>

                            <div class="form-group">
                                <label class="label-control" for="marital_status">Marital Status</label>
                                <select name="marital_status" id="marital_status" class="form-control-input" required>
                                    <option value="" disabled selected>Select marital status</option>
                                    <option value="YES">Yes</option>
                                    <option value="NO">No</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>

                            <div class="form-group">
                                <label class="label-control" for="education_status">Education Level</label>
                                <select name="education_status" id="education_status" class="form-control-input" required>
                                    <option value="" disabled selected>Select education level</option>
                                    <option value="GRADUATED">Graduated</option>
                                    <option value="NOT GRADUATED">Not Graduated</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>

                            <div class="form-group">
                                <label class="label-control" for="dependents">Number of Dependents</label>
                                <select name="dependents" id="dependents" class="form-control-input" required>
                                    <option value="" disabled selected>Select number of dependents</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3+">3+</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>

                            <div class="form-group">
                                <label class="label-control" for="self_employment">Self-Employed</label>
                                <select name="self_employment" id="self_employment" class="form-control-input" required>
                                    <option value="" disabled selected>Select employment status</option>
                                    <option value="YES">Yes</option>
                                    <option value="NO">No</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>

                            <div class="form-group">
                                <label class="label-control" for="property_area">Property Area</label>
                                <select name="property_area" id="property_area" class="form-control-input" required>
                                    <option value="" disabled selected>Select property area</option>
                                    <option value="RURAL">Rural</option>
                                    <option value="SEMIRURAL">Semi-Rural</option>
                                    <option value="URBAN">Urban</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <div class="text-container">
                            <div class="form-group">
                                <label class="label-control" for="applicantIncome">Applicant Income ($)</label>
                                <input name="applicantIncome" type="number" min="0" max="100000" class="form-control-input" id="applicantIncome" required>
                                <div class="help-block with-errors"></div>
                            </div>

                            <div class="form-group">
                                <label class="label-control" for="coapplicantIncome">Co-applicant Income ($)</label>
                                <input name="coapplicantIncome" type="number" min="0" max="100000" class="form-control-input" id="coapplicantIncome" required>
                                <div class="help-block with-errors"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="label-control" for="loan_amnt">Loan Amount ($)</label>
                                <input name="loan_amnt" class="form-control-input" type="number" min="500" max="40000" id="loan_amnt" required>
                                <div class="help-block with-errors"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="label-control" for="term_d">Loan Term (Days)</label>
                                <input name="term_d" class="form-control-input" type="number" min="10" max="365" id="term_d" required>
                                <div class="help-block with-errors"></div>
                            </div>

                            <div class="form-group">
                                <label class="label-control" for="credit_history">Credit History</label>
                                <select name="credit_history" id="credit_history" class="form-control-input" required>
                                    <option value="" disabled selected>Select credit history</option>
                                    <option value="1">1 - All debts paid</option>
                                    <option value="0">0 - Debts not paid</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="label-control" for="loan_bank">Purpose of Loan</label>
                                <select name="loan_bank" id="loan_bank" class="form-control-input" required>
                                    <option value="" disabled selected>Select Purpose of Loan</option>
                                    <option value="Home">Home</option>
                                    <option value="Car">Car</option>
                                    <option value="Education">Education</option>
                                    <option value="Business">Business</option>
                                </select>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <button type="submit" class="form-control-submit-button">MAKE PREDICTION</button>
                    </div>
                </div>
            </form>
            
            <div id="resultModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <div class="result" align="center">
                        {% if result %}
                        <h4 style="color: #343a40; margin-bottom: 20px;">Loan Application Result</h4>
                        {% for key, value in original_input.items() %}
                        <p style="color: #495057; margin-bottom: 8px;"><b>{{ key }}</b> : {{ value }}</p>
                        {% endfor %}
                        <hr style="border-top: 1px solid #dee2e6; margin: 20px 0;">
                        <p style="color: #28a745; font-size: 18px; font-weight: 600; margin-bottom: 15px;">Loan Decision:</p>
                        <p style="font-size: 24px; font-weight: bold; color: {% if result == 'Congratulations! your Loan Application has been Approved!' %}#28a745{% else %}#dc3545{% endif %};">{{ result }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div> <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.easing.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.magnific-popup.js') }}"></script>
    <script src="{{ url_for('static', filename='js/morphext.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/isotope.pkgd.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/validator.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    <script src="{{ url_for('static', filename='js/swiper.min.js') }}"></script>
    
    <script>
   $(document).ready(function() {
    var modal = document.getElementById("resultModal");
    var span = document.getElementsByClassName("close")[0];
    
    {% if result %}
        // Check if this is a form submission or page refresh
        if (performance.navigation.type === 1) {
            // This is a page refresh - don't show modal
            modal.style.display = "none";
        } else {
            // This is likely a form submission - show modal
            modal.style.display = "block";
        }
    {% else %}
        // No results, keep modal hidden
        modal.style.display = "none";
    {% endif %}
    
    // Close modal when clicking X
    span.onclick = function() {
        modal.style.display = "none";
    }
    
    // Close modal when clicking outside
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
});
    </script>
</body>
</html>